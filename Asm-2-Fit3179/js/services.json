{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "background": "#faf0e6",
    "data": {
      "url": "https://raw.githubusercontent.com/jytKelly12/FIT3179/main/cleaned_living_cost_indexes.csv"
    },
    "transform": [
      {
        "calculate": "datum.Date === 'Unnamed: 1' ? 'Jun-22' : datum.Date === 'Unnamed: 2' ? 'Sep-22' : datum.Date === 'Unnamed: 3' ? 'Dec-22' : datum.Date === 'Unnamed: 4' ? 'Mar-23' : datum.Date === 'Unnamed: 5' ? 'Jun-23' : datum.Date",
        "as": "FormattedDate"
      },
      {
        "filter": "datum['Unnamed: 0'] !== 'Selected services, annual movement (%)' && datum['Unnamed: 0'] !== 'Rents'"
      },
      {
        "calculate": "replace(replace(datum['Unnamed: 0'], 'Hairdressing & personal grooming services', 'Hairdressing'), 'Maintenance & repair of dwelling', 'Maintence')",
        "as": "ShortenedService"
      },
      {
        "calculate": "datum.ShortenedService === 'Insurance' ? 'Insurance has the greatest increase in cost' : null",
        "as": "LabelText"
      }
    ],
    "facet": {
      "field": "ShortenedService",
      "type": "nominal",
      "title": "Services"
    },
    "spec": {
      "layer": [
        {
          "mark": "bar",
          "encoding": {
            "x": {
              "field": "FormattedDate",
              "type": "nominal",
              "title": "Date",
              "sort": ["Jun-22", "Sep-22", "Dec-22", "Mar-23", "Jun-23"]
            },
            "y": {
              "field": "Annual Movement (%)",
              "type": "quantitative",
              "title": "Annual Movement (%)"
            },
            "tooltip": [
              {
                "field": "ShortenedService",
                "type": "nominal",
                "title": "Service"
              },
              {"field": "FormattedDate", "type": "nominal", "title": "Date"},
              {
                "field": "Annual Movement (%)",
                "type": "quantitative",
                "title": "Annual Movement (%)"
              }
            ],
            "color": {
              "field": "FormattedDate",
              "type": "nominal",
              "scale": {
                "domain": ["Jun-22", "Sep-22", "Dec-22", "Mar-23", "Jun-23"],
                "range": ["#A5C8E4", "#C0ECCC", "#F9F0C1", "#F4CDA6", "#F6A8A6"]
              },
              "title": "Formatted Date"
            }
          }
        },
        {
          "mark": {"type": "line", "size": 1},
          "encoding": {
            "x": {
              "field": "FormattedDate",
              "type": "nominal",
              "sort": ["Jun-22", "Sep-22", "Dec-22", "Mar-23", "Jun-23"]
            },
            "y": {"field": "Annual Movement (%)", "type": "quantitative"},
            "color": {"value": "black"},
            "tooltip": [
              {
                "field": "ShortenedService",
                "type": "nominal",
                "title": "Service"
              },
              {"field": "FormattedDate", "type": "nominal", "title": "Date"},
              {
                "field": "Annual Movement (%)",
                "type": "quantitative",
                "title": "Annual Movement (%)"
              }
            ]
          }
        }
      ]
    },
    "config": {"view": {"stroke": "transparent"}, "axis": {"domainWidth": 1}}
  }